# How to setup node modules

## Windows

事前に node.exe に PATH を通す。

### Chromium Edge がすでにインストールされている場合

環境によって、Chromium のダウンロードに失敗する。そのため、PUPPETEER_SKIP_DOWNLOAD を指定して Puppeteer のインストールを実施する。

**エラーの例**

```text
npm error ERROR: Failed to set up Chromium r1108766! Set "PUPPETEER_SKIP_DOWNLOAD" env variable to skip download.
```

**インストール方法**

```text
cd {projectFolder}/bin
SET PUPPETEER_SKIP_DOWNLOAD='true'  # コマンドプロンプトの場合
$env:PUPPETEER_SKIP_DOWNLOAD='true' # PowerShell の場合
npm install
```

### Puppeteer に Chromium をダウンロードさせる場合

以下のコマンドがエラー無く完了する環境の場合は、以下の方法でも良い。  
一般的に企業内環境では失敗することが多いため、「Chromium Edge がすでにインストールされている場合」によること。

```text
cd {projectFolder}/bin
npm install
```

### トラブルシューティング

#### `npm install` 時にエラーが発生する場合

`npm install` 時に以下のようなエラーが発生する場合は、コマンド プロンプトから実行することで問題の回避が可能。

```text
PS > npm install
npm : このシステムではスクリプトの実行が無効になっているため、ファイル npm.ps1 を読み込むことができません。詳
細については、「about_Execution_Policies」(https://go.microsoft.com/fwlink/?LinkID=135170) を参照してください。
発生場所 行:1 文字:1
+ npm install
+ ~~~
    + CategoryInfo          : セキュリティ エラー: (: ) []、PSSecurityException
    + FullyQualifiedErrorId : UnauthorizedAccess
PS >
```

## Linux

Chromium の依存ライブラリが多数存在するため、Puppeteer に Chromium をダウンロードさせる場合でも依存関係の解決に留意すること。

```text
cd {projectFolder}/bin
npm install
```
